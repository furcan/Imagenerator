/* Imagenerator (https://github.com/furcan/Imagenerator) - Version: 0.0.1-beta.01 - Author: Furkan MT (https://github.com/furcan) - Copyright 2020 Imagenerator, MIT Licence (https://opensource.org/licenses/MIT) */

(function(a,b){"function"==typeof define&&define.amd?define([],function(){return b(a)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=b(a):a.Imagenerator=b(a)})("undefined"==typeof global?"undefined"==typeof window?this:window:global,function(a){'use strict';if("undefined"!=typeof a||"undefined"!=typeof a.document){var b={direction:"ltr",type:"jpeg",quailty:1,fontFix:!1,background:{url:"https://raw.githubusercontent.com/furcan/Imagenerator/master/assets/imagenerator-background-1.png",crossorigin:"anonymous",width:1920,height:1920,overlayColor:"rgba(0,0,0,0.4)"},title:{use:!0,positionTop:300,text:"Imagenerator",maxLength:120,fontFamily:"sans-serif",fontSize:80,fontWeight:600,textAlign:"center",color:"#fff",shadowColor:"rgba(0,0,0,0.2)",shadowBlur:120},icon:{use:!0,url:"https://raw.githubusercontent.com/furcan/Imagenerator/master/assets/imagenerator-icon-1-gold.png",crossorigin:"anonymous",width:240,height:240,positionTop:480,align:"center",opacity:1,shadowColor:"rgba(0,0,0,0.2)",shadowBlur:120},description:{use:!0,positionTop:900,text:"There are two Mustafa Kemal: One is me, flesh and bone, a temporary Mustafa Kemal... I cannot express the other Mustafa Kemal with the word \"I\"; it is us, not me! The other one is an intellectual and warrior community in every corner of the country striving for new ideas, new life, and great ideals. I am representing their dreams. My attempts are to satisfy what they long for. That Mustafa Kemal is you; you are all. The other Mustafa Kemal, who is not temporary, has to live and be successful!",maxLength:500,fontFamily:"sans-serif",fontSize:50,fontWeight:400,textAlign:"center",color:"#f8f8f8",shadowColor:"rgba(0,0,0,0.2)",shadowBlur:120},author:{use:!0,positionTop:1600,text:"- Mustafa Kemal ATATURK -",maxLength:120,fontFamily:"sans-serif",fontSize:40,fontWeight:400,textAlign:"center",color:"#c4c4c4",shadowColor:"rgba(0,0,0,0.2)",shadowBlur:120},footer:{use:!0,positionBottom:100,text:"github.com/furcan",maxLength:120,fontFamily:"sans-serif",fontSize:35,fontWeight:400,textAlign:"center",color:"#a9a9a9",shadowColor:"rgba(0,0,0,0.2)",shadowBlur:120}},c=function(){var a={},b=!1,d=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(b=arguments[0],d++);for(var e=function(d){for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(a[e]=b&&"[object Object]"===Object.prototype.toString.call(d[e])?c(a[e],d[e]):d[e])};d<arguments.length;d++)e(arguments[d]);return a},d=function(a,b){return console.error("%c "+a+" ","padding:2px;border-radius:20px;color:#fff;background:#ff5549","\n"+b)},e=function(a,b){return console.log("%c "+a+" ","padding:2px;border-radius:20px;color:#fff;background:#26c0d3","\n"+b)},f=function(a){return"string"==typeof a&&0<a.length},g=function(a){return"number"==typeof a&&0<a},h=function(a,b,c,d,e,f,h){d=g(d)?d:120,b=b.length>d?b.substring(0,d)+"...":b;for(var i=b.split(" "),j=[],k=[],l=0,m=[],n="",o=0;o<i.length;o++){var p=i[o],q=parseInt(a.measureText(p).width);if(q>h){i.splice(o,1);for(var r=p.split(""),s=0;s<r.length;s++){n+=r[s];var t=parseInt(a.measureText(n).width);t>h&&(m.push(n),n=n.replace(n,""))}m.push(n),n=n.replace(n,"")}j=m.concat(i)}for(var u=0;u<j.length;u++){var v=j.slice(l,u).join(" "),w=u==j.length-1,x=parseInt(a.measureText(v).width)>h;x&&(k.push(j.slice(l,u).join(" ")),l=u),w&&(k.push(j.slice(l,j.length).join(" ")),l=u)}for(var z=0;z<k.length;z++)a.fillText(k[z],e,f),f+=c},i=function(a,c,d,e){var i=!0===c.use;if(i){var j=b[a],k=c.text;k=f(k)?k:j.text;var l=c.textAlign;l=f(l)?l:j.textAlign;var m=e.posXCenter;"left"===l?m=e.contentPosLeft:"right"===l&&(m=e.contentPosRight);var n=c.positionTop;if(n=g(n)?n:j.positionTop,!n){var o=c.positionBottom;o=g(o)?o:j.positionBottom,n=e.height-o}var p=c.fontSize,q=g(p)?1.5*p:1.5*j.fontSize;p=g(p)?p+"px":j.fontSize+"px";var r=c.fontWeight;r=g(r)?r:j.fontWeight;var s=c.fontFamily;s=f(s)?s:j.fontFamily;var t=r+" "+p+" "+s,u=c.maxLength;u=g(u)?u:j.maxLength;var v=c.color;v=f(v)?v:j.color;var w=c.shadowColor;w=f(w)?w:j.shadowColor;var x=c.shadowColor;x=g(x)?x:j.shadowBlur,d.font=t,d.textAlign=l,d.fillStyle=v,d.shadowColor=w,d.shadowBlur=x,h(d,k,q,u,m,n,e.contentMaxWidth)}},j=function(c,d,h,j,k,l,m){var n=a.document.createElement("canvas");if(!n)return e("Imagenerator Error: ","Something went wrong when the canvas has been created."),!1;n.width=c,n.height=d;var o=c/2,p=parseInt(c-c/3),q=parseInt((c-p)/3.5),r=parseInt(c-q),s={width:c,height:d,posXCenter:o,posYCenter:d/2,contentMaxWidth:p,contentPosLeft:q,contentPosRight:r},t=n.getContext("2d");t.font="normal 35px sans-serif",t.fillStyle="#fff",t.textAlign="center",t.fillText(" ",0,0);var u=(k||{}).direction;u=-1<["ltr","rtl"].indexOf(u)?u:b.direction,t.direction=u,t.save(),t.drawImage(h,0,0,c,d);var v=((k||{}).background||{}).overlayColor;if(v=!!f(v)&&v,v&&(t.fillStyle=v,t.fillRect(0,0,c,d),t.restore()),j){var w=((k||{}).icon||{}).align;w=f(w)?w:b.icon.align;var x=parseInt(o-j.width/2);"left"===w?x=q:"right"===w&&(x=parseInt(r-j.width));var y=((k||{}).icon||{}).opacity;y=g(y)?y:b.icon.opacity;var z=((k||{}).icon||{}).positionTop;z=g(z)?z:b.icon.positionTop;var A=((k||{}).icon||{}).shadowColor;A=f(A)?A:b.icon.shadowColor;var B=((k||{}).icon||{}).shadowBlur;B=g(B)?B:b.icon.shadowBlur,t.globalAlpha=y,t.shadowColor=A,t.shadowBlur=B,t.drawImage(j.element,x,z,j.width,j.height),t.globalAlpha=1}if(i("title",k.title,t,s),i("description",k.description,t,s),i("author",k.author,t,s),i("footer",k.footer,t,s),"function"==typeof l){var C="number"==typeof k.quailty&&.25<k.quailty?k.quailty:b.quailty,D=f(k.type)&&-1<["png","jpeg","webp"].indexOf(k.type)?k.type:b.type,E=n.toDataURL("image/"+D,C),F={base64:m?null:E,loading:!!m};return l(F)}return!1},k=function(a,e,h){a="object"!=typeof a||Array.isArray(a)?{}:a;var i=c(!0,b,a);if("function"==typeof e){var k=((i||{}).background||{}).url;k=f(k)?k:b.background.url;var l=((i||{}).background||{}).crossorigin;l=f(l)?l:b.background.crossorigin;var m=((i||{}).background||{}).width;m=g(m)?m:b.background.width;var n=((i||{}).background||{}).height;n=g(n)?n:b.background.height;var o=new Image;o.setAttribute("src",k),o.setAttribute("crossorigin",l),o.setAttribute("width",m),o.setAttribute("height",n),o.onload=function(){var a=!0===((i||{}).icon||{}).use;if(a){var c=((i||{}).icon||{}).url;c=f(c)?c:b.icon.url;var d=((i||{}).icon||{}).crossorigin;d=f(d)?d:b.icon.crossorigin;var k=((i||{}).icon||{}).width;k=g(k)?k:b.icon.width;var l=((i||{}).icon||{}).height;l=g(l)?l:b.icon.height;var p=new Image;p.setAttribute("src",c),p.setAttribute("crossorigin",d),p.setAttribute("width",k),p.setAttribute("height",l);var q={element:p,width:k,height:l};p.onload=function(){j(m,n,o,q,i,e,h)}}else j(m,n,o,!1,i,e,h)};return e({base64:null,loading:!0})}return d("Imagenerator Error: ","\"GetBase64\" must have an argument and the argument has to be a function."),!1},l=function(a){this.options=a};return l.prototype={GetBase64:function(a){var b=this.options,c=!0===b.fontFix,d=function(){if(k(b,a,c),c){c=!1;var d=setTimeout(function(){k(b,a,c),clearTimeout(d)},1923)}};return d()}},l}});